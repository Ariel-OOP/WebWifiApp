<!DOCTYPE html>
<html>
<head>
    <!-- Optional theme -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- Latest compiled and minified JavaScript -->
    <script
            src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.3.0/Chart.bundle.js"></script>
    <script src="https://fastcdn.org/Cookies.js/1.2.2/cookies.min.js"></script>

    <meta charset="utf-8">
    <title>Wigle WIFI extracter</title>
    <style>

    </style>

</head>
<body>

<!-- WebSource: https://github.com/johnwargo/bootstrap-navbar-complete/blob/master/index.html ,I modified it a bit-->
<!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#about">Wifi Application</a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li><a class="menuLink" href="#filterAnchor"><span class="glyphicon glyphicon-signal"></span> Filter</a>
                </li>
                <li><a class="menuLink" href="#algo1Anchor"><span class="glyphicon glyphicon-signal"></span> Algo 1</a>
                </li>
                <li><a class="menuLink" href="#algo2Anchor"><span class="glyphicon glyphicon-map-marker"></span> Algo 2</a>
                </li>
                <li><a class="menuLink" href="csvtable.html"><span class="glyphicon glyphicon-play-circle"></span> CSV table</a>
                </li>

            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a class="menuLink" href="#"><span class="glyphicon glyphicon-user"></span><strong><span id="userNameText"> </span></strong></a>
                </li>
                <li><a class="menuLink" href="#loginModal" data-toggle="modal" data-target="#loginModal"><span class="glyphicon glyphicon-lock"></span> Login</a>
                </li>
                <li class="active"><a class="menuLink" href="#aboutModal" data-toggle="modal" data-target="#myModal"><span class="glyphicon glyphicon-star-empty"></span> About</a>
                </li>
            </ul>
        </div>
        <!--/.nav-collapse -->
    </div>
</div>

<!----------------------------------------------------------------------->
<div id="about"></div>
<br>




<div class="container">
    <h1 class="page-header">Wifi Application</h1>



    <br>
    <div class="alert alert-danger collapse" role="alert" id="filePopup">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        <h4 id="filePopupMsg"> </h4>
    </div>

    <div class="alert alert-success" role="alert">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4> Start off by adding some files. <strong>Don't forget</strong> to click Save 2 CSV. Login to continue work.<br><br> Login into username: <strong>auto</strong>  for automatic changes to folders </h4>

            </div>

        </div>
    </div>



    <div class="alert alert-info" role="alert">
        <div class="row">
            <div class="col-lg-4 col-md-3 col-sm-5">
                <br>
                <form action="/sendComboFile" method="post" enctype="multipart/form-data">
                    <div class="input-group input-group-md"  data-toggle="tooltip" title="Only add a CSV combo file!">
                        <input type="file" name="uploaded_file" class="form-control" accept=".csv">
                        <span class="input-group-btn">
                <button class="btn btn-default"  >Upload combo</button>
              </span>
                    </div>
                </form>
                <br>
            </div>

            <div class="col-lg-4 col-md-3 col-sm-5">
                <br>
                <form action="/sendFiles" method="post" enctype="multipart/form-data">
                    <div class="input-group input-group-md " data-toggle="tooltip" title="Only add Wigle CSV files!">
                        <input class="form-control" type="file" id="ctrl" name="uploaded_folder" webkitdirectory="" directory="" multiple="">
                        <span class="input-group-btn">
          <button class="btn btn-default" >Upload folder</button>
        </span>
                    </div>
                </form>
            </div>


            <div class="col-lg-2 col-md-2 col-sm-2">
                <br>
                <form method="post" enctype="multipart/form-data">
                    <button id="save2csvbutton" class="btn btn-default  pull-right" type="button" name="button"  data-toggle="tooltip" title="Sends selected files to server"  >Save2 CSV</button>

                </form>
            </div>

            <div class="col-lg-2 col-md-2 col-sm-2">
                <br>
                <form method="post" enctype="multipart/form-data">
                    <button id="clearDataButton" class="btn btn-default " type="button" name="button">Clear Data</button>

                </form>
            </div>
            <div class="col-lg-2 col-md-2 col-sm-2">
                <button id="Save2kmlBTN" class="btn btn-default" >Save 2 KML</button>
            </div>
        </div>
    </div>


    <div class="alert alert-success" role="alert">
        <div class="row">
            <div class="col-lg-6 col-md-3 col-sm-5">
                <h3>Number of Lines:</h3>
            </div>

            <div class="col-lg-6 col-md-3 col-sm-5">
                <h3 id="NumberOfLines">None...</h3>
            </div>

            <div class="row">
                <div class="col-lg-6 col-md-3 col-sm-5">
                    <h3>Number of MACS:</h3>
                </div>
            <div class="col-lg-6 col-md-3 col-sm-5">
                <h3 id="NumberOfMACS">None...</h3>
            </div>
            </div>
        </div>
    </div>


    <a id="filterAnchor"></a>
    <div class="row">
        <div class="col-lg">

            <div class="alert alert-info" role="alert">
                <h4 class="alert-heading">Filters</h4>
                <hr>
                <h4 id='displayFilter' class="alert-heading"></h4>
                <hr>

                <!-- Search box Start -->
                <form >
                    <div class="form-row align-items-center">
                        <div class="col-lg-6 col-md-3 col-sm-5">
                            <label class="mr-sm-2" for="inlineFormCustomSelect">Filter</label>
                            <select class="custom-select mb-2 mr-sm-2 mb-sm-0" id="FilterBySelection">
                                <option selected>Choose Filter</option>
                                <option value="1">Time</option>
                                <option value="2">Location</option>
                                <option value="3">Device</option>
                            </select>
                        </div>
                        <div class="col-lg-6 col-md-3 col-sm-5">
                            <label class="custom-control custom-checkbox mb-2 mr-sm-2 mb-sm-0">
                                <input type="checkbox" class="custom-control-input" id="NegateInput1">
                                <span class="custom-control-indicator"></span>
                                <span class="custom-control-description">Negate</span>
                            </label>
                        </div>


                        <div class="col-auto">
                            <label class="mr-sm-2" for="inlineFormCustomSelect"></label>
                            <select class="custom-select mb-2 mr-sm-2 mb-sm-0" id="FilterByLogic">
                                <option selected>Choose Logic</option>
                                <option value="1">And</option>
                                <option value="2">Or</option>
                            </select>
                        </div>



                    </div>
                </form>
                <!-- Search box End -->

                <hr>
                <div class="btn-group">
                    <button type="button" id="btnAddFilter" class="btn btn-primary">+</button>
                    <button type="button" id="btnFilterSumbit" class="btn btn-primary">Filter</button>
                    <button type="button" id="btnSaveFilter" class="btn btn-primary">Save Filter</button>
                    <button type="button" id="btnClearFilter" class="btn btn-primary">Clear Filter</button>
                </div>

                <!-- Input boxes -->
                <hr>
                <div id="inputDeviceDiv">
                    <input type="text" id="inputDevice" placeholder="device" class="inputFilter">
                </div>

                <div id="inputTimeDiv">

                    <input id="start" class="inputStyle" type="date" name="bday" value="2017-05-05" onchange="myFunction()" max=>
                    Enter start time:<br>
                    <input type="time" class="inputStyle" id="startTime" step="1" value="20:00:00">

                    <br><br>
                    Enter end date:<br>
                    <input id="end"  class="inputStyle" type="date" name="bday" value="2017-05-05">
                    Enter end time:<br>
                    <input type="time" class="inputStyle" id="endTime" step="1" value="20:00:00">”

                </div>

                <div id="inputLocationeDiv">
                    <input type="text" id="inputStartLat" placeholder="start lat" class="inputFilter">
                    <input type="text" id="inputStartLon" placeholder="start lon" class="inputFilter">
                    <hr>
                    <input type="text" id="inputEndLat" placeholder="end lat" class="inputFilter">
                    <input type="text" id="inputEndLon" placeholder="end lon" class="inputFilter">
                </div>



                <!-- Selection filter 2 -->



                <div id="inputFilter2">
                    <hr>
                    <h2>Filter 2</h2>
                    <hr>
                    <form >
                        <div class="form-row align-items-center">
                            <div class="col-lg-6 col-md-3 col-sm-5">
                                <label class="mr-sm-2" for="inlineFormCustomSelect">Filter</label>
                                <select class="custom-select mb-2 mr-sm-2 mb-sm-0" id="FilterBySelection2">
                                    <option selected>Choose Filter</option>
                                    <option value="1">Time</option>
                                    <option value="2">Location</option>
                                    <option value="3">Device</option>
                                </select>
                            </div>
                            <div class="col-lg-6 col-md-3 col-sm-5">
                                <label class="custom-control custom-checkbox mb-2 mr-sm-2 mb-sm-0">
                                    <input type="checkbox" class="custom-control-input" id="NegateInput2">
                                    <span class="custom-control-indicator"></span>
                                    <span class="custom-control-description">Negate</span>
                                </label>
                            </div>
                        </div>
                    </form >

                    <!-- Input boxes filter 2 -->

                    <hr>
                    <div id="inputDeviceDiv2">
                        <input type="text" id="inputDevice2" placeholder="device 2" class="inputFilter2">
                    </div>

                    <div id="inputTimeDiv2">
                        <input id="start2" class="inputStyle" type="date" name="bday" value="2017-05-05" onchange="myFunction()" max=>
                        Enter start time:<br>
                        <input type="time" class="inputStyle" id="startTime2" step="1" value="20:00:00">

                        <br><br>
                        Enter end date:<br>
                        <input id="end2"  class="inputStyle" type="date" name="bday" value="2017-05-05">
                        Enter end time:<br>
                        <input type="time" class="inputStyle" id="endTime2" step="1" value="20:00:00">”

                    </div>

                    <div id="inputLocationeDiv2">
                        <input type="text" id="inputStartLat2" placeholder="start lat 2" class="inputFilter2">
                        <input type="text" id="inputStartLon2" placeholder="start lon 2" class="inputFilter2">
                        <hr>
                        <input type="text" id="inputEndLat2" placeholder="end lat 2" class="inputFilter2">
                        <input type="text" id="inputEndLon2" placeholder="end lon 2" class="inputFilter2">
                    </div>
                </div>


            </div>
        </div>
    </div>


    <a id="algo1Anchor"></a>
    <div class="jumbotron">
        <div class="row">
            <div class="col-lg-4 col-md-3 col-sm-4">
                <h4>Algo 1</h4>
                Calculates the weighted arithmic mean of the mac
                entered.
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6">
                <canvas id="myChart" width="200" height="150"></canvas>

            </div>


        </div>
        <div class="row">
            <div class="col-lg-4 col-md-3 col-sm-4">
                <br>
                <form method="post" enctype="multipart/form-data">
                    <div class="input-group input-group-lg">
                        <input id="mac" type="text" class="form-control" placeholder="MAC" value="">
                        <span class="input-group-btn">
            <button id="submit" class="btn btn-default" type="button" name="button">Enter</button>
          </span>
                    </div><br>
                </form>
            </div>


        </div>

    </div>

    <table class="table" id="wifiTable">
        <tr class="success"><th>Mac</th><th>Lat</th><th>Lon</th><th>Alt</th></tr>
    </table>


    <a id="algo2Anchor"></a>

    <div class="jumbotron">
        <div class="row">
            <div class="col-lg-5 col-md-3 col-sm-4">
                <h4>Algo 2</h4>
                Calculates the weighted arithmic mean of the mac
                entered.
            </div>
            <div class="col-lg-4 col-md-3 col-sm-4">
                <h4>Combo</h4>
                Enter Combo line into the text box press
                Combo??? and get result.
            </div>

        </div>
        <div class="row">
            <div class="col-lg-3 col-md-4 col-sm-4">
                <br>
                <form method="post" enctype="multipart/form-data">
                    <div class="input-group input-group-lg">
                        <input id="mac1Algo2" type="text" class="form-control" placeholder="MAC 1" value="">
                        <br>
                        <hr>
                        <input id="mac2Algo2" type="text" class="form-control" placeholder="MAC 2" value="">
                        <br>
                        <hr>
                        <input id="mac3Algo2" type="text" class="form-control" placeholder="MAC 3" value="">
                        <span class="input-group-btn">
          </span>
                    </div><br>
                </form>
            </div>

            <div class="col-lg-2 col-md-3 col-sm-3">
                <br>
                <div class="input-group input-group-lg">
                    <input id="sig1Algo2" type="text" class="form-control" placeholder="Sig1" value="">
                    <br>
                    <hr>
                    <input id="sig2Algo2" type="text" class="form-control" placeholder="Sig2" value="">
                    <br>
                    <hr>
                    <input id="sig3Algo2" type="text" class="form-control" placeholder="Sig3" value="">
                    <span class="input-group-btn">
          <button id="submitAlgo2" class="btn btn-default" type="button" name="button">Enter</button>
        </span>
                </div><br>
            </div>
            <!-- combo text input-->
            <div class="col-lg-3 col-md-3 col-sm-3">
                <br>
                <div class="input-group input-group-lg">
                    <input id="comboTextInput" type="text" class="form-control" placeholder="Combo Text" value="">
                    <span class="input-group-btn">
          <button id="submitComboWithQuestionMarksAlgo2" class="btn btn-default" type="button" name="button">Combo ???</button>
        </span>
                </div><br>
            </div>

            <div class="col-lg-4 col-md-3 col-sm-6">
                <canvas id="myChartAlgo2" width="200" height="200"></canvas>

            </div>


        </div>

    </div>

    <!-- Algo 2 mac table -->
    <table class="table" id="algo2Table">
        <tr class="success"><th>Mac</th><th>Lat</th><th>Lon</th><th>Alt</th></tr>
    </table>


    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 style="color:red;"><span class="glyphicon glyphicon-user"></span> Website Created By:</h4>
                </div>
                <div class="modal-body">
                    <h2>Nissan Goldberg</h2>
                    <img src="https://media.licdn.com/mpr/mpr/shrinknp_200_200/AAEAAQAAAAAAAAmxAAAAJGY2M2VhZWJjLWVhZjUtNDllZi04YzE4LWJhYmVhNjE4ZmExYQ.jpg" class="img-circle" alt="Cinque Terre"  style="width:18%">
                    <br>
                    <hr>
                    <p>Currently a CS student in Ariel University</p>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-default btn-default pull-left" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Close</button>
                    <p>Want to view my github <a href="https://github.com/Ariel-OOP/">Github</a></p>
                </div>
            </div>
        </div>
    </div>
    <!--end of modal-->

    <!-- login Modal -->
    <div class="modal fade" id="loginModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 style="color:red;"><span class="glyphicon glyphicon-lock"></span> Login: </h4>
                </div>
                <div class="modal-body">
                    <div class="input-group input-group-md">
                        <input id="usernameInput" type="text" class="form-control" placeholder="user name" value="">
                        <span class="input-group-btn">
                    <button id="submitUsername" class="btn btn-default" type="button" name="button">Log in</button>
                        </span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-default btn-default pull-left" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Close</button>
                </div>
            </div>
        </div>
    </div>
    <!--end of modal-->

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <script>
        /**
         * Created by nissa on 12/17/2017.
         */
        <!-----------counter ,source=https://stackoverflow.com/questions/1535631/static-variables-in-javascript--------------------------->
        var incrTable = (function () {
            var i = 1;

            return function () {
                return i++;
            }
        })();
        <!-----------end of counter --------------------------->

        <!-----------start tooltips nissan--------------------------->
        $(document).ready(function(){
            $('[data-toggle="tooltip"]').tooltip();

        });
        $(window).on('load', function() {
            var decodedCookie = document.cookie;
            var ca = decodedCookie.split(';');
            for (var index = 0; index < ca.length; ++index) {
                if ((ca[index]).includes("user=")){
                    var userNameFromCookie = ca[index].replace('user=','');
                    console.log(userNameFromCookie);
                    break;
                }
            }
            $("span#userNameText").html(' '+userNameFromCookie);
        })

        <!--------------end of tooltips--------------------------->

        <!--------------start of save 2 csv --------------------------->
        $("button#save2csvbutton").click(() => {
            alert("will save to csv")
        $.ajax(
            {
                "url": encodeURI("/save2csv")
            }
        ).then(
            function(output) {
                var n = output.includes("true");
                var userNameOutput = output.split(",");
                $('div#filePopup').show();
                if(n==true){
                    $("h4#filePopupMsg").html("saved "+ userNameOutput[1]);
                    $("h3#NumberOfLines").html(""+ userNameOutput[2]);
                    console.log("NumberOfLines:"+userNameOutput[2]);
                    $("h3#NumberOfMACS").html(""+ userNameOutput[3]);
                    console.log("NumberOfMACS:"+userNameOutput[3]);

                }
                else
                    $("h4#filePopupMsg").html("Can't save no files, try loading some files dimwit.")

            }
        );
        return false
        })


        <!--------------start of clear data --------------------------->
        $("button#clearDataButton").click(() => {
            alert("will delete")
        $.ajax(
            {
                "url": encodeURI("/clearData")
            }
        ).then(
            function(output) {
                $('div#filePopup').show();
                $("h3#NumberOfLines").html("0");
                $("h3#NumberOfMACS").html("0");
                $("h4#filePopupMsg").html("deleted files");
            }
        );
        return false
        })

        <!--start of submit Username -->
        $("button#submitUsername").click(() => {
        var userNameInput = $('input#usernameInput').val();
        $.ajax(
            {
                "url": encodeURI("/login?"+userNameInput)
            }
        ).then(
            function(output) {
                $('div#filePopup').show();

                $("h4#filePopupMsg").html("logged in: "+output);
                $("span#userNameText").html("  "+output+"");



            }
        );
        return false
        })


        <!--------------start of algo 1 --------------------------->

        $("button#submit").click(() => {
            var mac  = $("input#mac").val();
        var name   = $("input#mac").val();
        alert(mac)
        alert(name)
        $.ajax(
            {
                "url": encodeURI("/submitAlgo1?" + mac + "," + name)
            }
        ).then(
            function(output) {
                var splitOutput = output.split(",");

                new Chart(document.getElementById("myChart"),
                    {"type":"bubble","data":{"datasets":[{"label":"Wifi Points",
                                "data":[{"x":31,"y":30,"r":5},{"x":parseFloat(splitOutput[0]),"y":parseFloat(splitOutput[1]),"r":10},{"x":30,"y":33,"r":5},{"x":33,"y":36,"r":5}],
                                "backgroundColor":"rgb(255, 99, 132)"}]}});


            <!--------------append wifi point to table--------------------------->
                var tableColor;
                var iterationTable= incrTable();
                if (iterationTable%2==1){
                    tableColor='danger';
                }else {
                    tableColor ='info';
                }
                var tr = "<tr class="+tableColor+"><td>"+splitOutput[3]+"</td><td>"
                    +splitOutput[0]+"</td><td>"+splitOutput[1]+"</td><td>"+splitOutput[2]+"</td></tr>"
                $('table#wifiTable').append(tr);
            <!--------------end of appending table--------------------------->
            }
        );
        return false
        })

        <!--end of Algo 1-->

        <!--start of save 2 csv-->






        <!--end of save 2 csv-->

        <!-------------------start of algo 2-------------------------->

        $("button#submitAlgo2").click(() => {
            var mac1Algo2  = $("input#mac1Algo2").val();
        var mac2Algo2   = $("input#mac2Algo2").val();
        var mac3Algo2  = $("input#mac3Algo2").val();
        var sig1Algo2   = $("input#sig1Algo2").val();
        var sig2Algo2   = $("input#sig2Algo2").val();
        var sig3Algo2   = $("input#sig3Algo2").val();


        $.ajax(
            {
                "url": encodeURI("/submitAlgo2?" + mac1Algo2 + "," + mac2Algo2 +","+mac3Algo2 +","+sig1Algo2 +","+sig2Algo2 +","+sig3Algo2)
            }
        ).then(
            function(output) {
                var splitOutput = output.split(",");

                new Chart(document.getElementById("myChartAlgo2"),
                    {"type":"bubble","data":{"datasets":[{"label":"Wifi Points",
                        "data":[{"x":31,"y":30,"r":5},{"x":parseFloat(splitOutput[0]),"y":parseFloat(splitOutput[1]),"r":10},{"x":30,"y":33,"r":5},{"x":33,"y":36,"r":5}],
                        "backgroundColor":"rgb(255, 99, 132)"}]}});


                <!--------------append wifi point to table--------------------------->
                var tableColor;
                var iterationTable= incrTable();
                if (iterationTable%2==1){
                    tableColor='danger';
                }else {
                    tableColor ='info';
                }
                var tr = "<tr class="+tableColor+"><td>"+splitOutput[3]+"</td><td>"
                    +splitOutput[0]+"</td><td>"+splitOutput[1]+"</td><td>"+splitOutput[2]+"</td></tr>"
                $('table#algo2Table').append(tr);
                <!--------------end of appending table--------------------------->
            }
        );
        return false
        })

        <!-------------------end of algo 2-------------------------->

        <!-------------------start of combo ???-------------------------->

        $("button#submitComboWithQuestionMarksAlgo2").click(() => {
            var comboInput  = $("input#comboTextInput").val();
        $.ajax(
            {
                "url": encodeURI("/submitComboWithQuestionMarksAlgo2?" +comboInput )
            }
        ).then(
            function(output) {
                var splitOutput = output.split(",");

                new Chart(document.getElementById("myChartAlgo2"),
                    {"type":"bubble","data":{"datasets":[{"label":"Wifi Points",
                        "data":[{"x":31,"y":30,"r":5},{"x":parseFloat(splitOutput[0]),"y":parseFloat(splitOutput[1]),"r":10},{"x":30,"y":33,"r":5},{"x":33,"y":36,"r":5}],
                        "backgroundColor":"rgb(255, 99, 132)"}]}});


            <!--------------append wifi point to table--------------------------->
                var tableColor;
                var iterationTable= incrTable();
                if (iterationTable%2==1){
                    tableColor='danger';
                }else {
                    tableColor ='info';
                }
                var tr = "<tr class="+tableColor+"><td>"+splitOutput[3]+"</td><td>"
                    +splitOutput[0]+"</td><td>"+splitOutput[1]+"</td><td>"+splitOutput[2]+"</td></tr>"
                $('table#algo2Table').append(tr);
            <!--------------end of appending table--------------------------->
            }
        );
        return false
        })

        <!-------------------end of submit combo ???-------------------------->

        <!--start of save to kml -->


        $("button#Save2kmlBTN").click(() => {
            var userNameInput = $('input#usernameInput').val();
        $.ajax(
            {
                "url": encodeURI("/Save2kml")
            }
        ).then(
            function(output) {
                $('div#filePopup').show();
                $("h4#filePopupMsg").html("saved to kml");
            }
        );
        return false
        })


        <!-------------------------scroll animation--------------------------->
        $(document).on('click', 'a[href^="#"]', function (event) {
            event.preventDefault();

            $('html, body').animate({
                scrollTop: $($.attr(this, 'href')).offset().top
            }, 500);
        });


    </script>






    <script>
        <!-- On load hide -->
        $( document ).ready(function() {
            $("div#inputTimeDiv").hide();
            $("div#inputLocationeDiv").hide();
            $("div#inputDeviceDiv").hide();
            $("select#FilterByLogic").hide();
            $("div#inputFilter2").hide();
            $("div#inputTimeDiv2").hide();
            $("div#inputLocationeDiv2").hide();
            $("div#inputDeviceDiv2").hide();
            $("select#FilterByLogic2").hide();
        });
        <!-- hide and show appropriate Input boxes filter 1 -->
        $("#FilterBySelection").click(function(){
            var selText = $(this).text();
            $(this).parents('.btn-group').find('.dropdown-toggle').html(selText+' <span class="caret"></span>');
            if ($("#FilterBySelection :selected").text().includes('Device')){
                $("div#inputDeviceDiv").show();
                $("select#FilterByLogic").show();
                $("div#inputTimeDiv").hide();
                $("div#inputLocationeDiv").hide();
            }else if ($("#FilterBySelection :selected").text().includes('Location')){
                $("div#inputLocationeDiv").show();
                $("select#FilterByLogic").show();
                $("div#inputTimeDiv").hide();
                $("div#inputDeviceDiv").hide();
            }else if ($("#FilterBySelection :selected").text().includes('Time')) {
                $("div#inputTimeDiv").show();
                $("select#FilterByLogic").show();
                $("div#inputLocationeDiv").hide();
                $("div#inputDeviceDiv").hide();
            }
        });
        <!-- hide and show appropriate Input boxes filter 2 -->
        $("#FilterBySelection2").click(function(){
            var selText = $(this).text();
            $(this).parents('.btn-group').find('.dropdown-toggle').html(selText+' <span class="caret"></span>');
            if ($("#FilterBySelection2 :selected").text().includes('Device')){
                $("div#inputDeviceDiv2").show();
                $("select#FilterByLogic2").show();
                $("div#inputTimeDiv2").hide();
                $("div#inputLocationeDiv2").hide();
            }else if ($("#FilterBySelection2 :selected").text().includes('Location')){
                $("div#inputLocationeDiv2").show();
                $("select#FilterByLogic2").show();
                $("div#inputTimeDiv2").hide();
                $("div#inputDeviceDiv2").hide();
            }else if ($("#FilterBySelection2 :selected").text().includes('Time')) {
                $("div#inputTimeDiv2").show();
                $("select#FilterByLogic2").show();
                $("div#inputLocationeDiv2").hide();
                $("div#inputDeviceDiv2").hide();
            }
        });
        <!-- Input boxes -->
        $("#btnAddFilter").click(function(){
            $("div#inputTimeDiv").hide();
            $("div#inputLocationeDiv").hide();
            $("div#inputDeviceDiv").hide();
            $("select#FilterByLogic").hide();
        });
        <!-- Submit Filter -->
        $("#btnFilterSumbit").click(function(){
            <!-- Submit Device Filter -->
            sessionStorage.clear();
            sessionStorage.setItem('Logic', $("#FilterByLogic :selected").text() );
            Cookies.set('filter1', $("#FilterBySelection :selected").text() , { expires: 600 });
            Cookies.set('filter2', $("#FilterBySelection2 :selected").text() , { expires: 600 });
            Cookies.set('Logic', $("#FilterByLogic :selected").text() , { expires: 600 });
            Cookies.set('negate1', $("#NegateInput1").is(":checked") , { expires: 600 });
            if ($("#FilterBySelection :selected").text().includes('Device')){
                if ($("#inputDevice").val().length === 0){
                    alert("you forgot to input");
                    return;
                }else{
                    sessionStorage.setItem('inputDevice1', $("#inputDevice").val() );
                    Cookies.set('input1', $("#inputDevice").val() , { expires: 600 });
                }
                <!-- Submit Location Filter -->
            }else if ($("#FilterBySelection :selected").text().includes('Location')){
                Cookies.set('input1', $("#inputStartLat").val() +"&"+ $("#inputStartLon").val()+"&"+ $("#inputEndLat").val()+"&"+ $("#inputEndLon").val(), { expires: 600 });
            }<!-- Submit Time Filter -->
            else if ($("#FilterBySelection :selected").text().includes('Time')) {
                Cookies.set('input1', $("#start").val()+"T"+$("#startTime").val() +"&"+ $("#end").val()+"T"+$("#endTime").val() , { expires: 600 });
            }
            if (!$("#FilterByLogic :selected").text().includes('Choose Logic')){
                <!-- if choose second filter -->
                Cookies.set('negate2', $("#NegateInput2").is(":checked") , { expires: 600 });
                if ($("#FilterBySelection2 :selected").text().includes('Device')){
                    if ($("#inputDevice2").val().length === 0){
                        alert("you forgot to input");
                        return;
                    }else{
                        sessionStorage.setItem('inputDevice1', $("#inputDevice2").val() );
                        Cookies.set('input2', $("#inputDevice2").val() , { expires: 600 });
                    }
                    <!-- Submit Location Filter -->
                }else if ($("#FilterBySelection2 :selected").text().includes('Location')){
                    Cookies.set('input2', $("#inputStartLat2").val() +"&"+ $("#inputStartLon2").val()+"&"+ $("#inputEndLat2").val()+"&"+ $("#inputEndLon2").val(), { expires: 600 });
                }<!-- Submit Time Filter -->
                else if ($("#FilterBySelection2 :selected").text().includes('Time')) {
                    Cookies.set('input2', $("#start2").val()+"T"+$("#startTime2").val() +"&"+ $("#end2").val()+"T"+$("#endTime2").val() , { expires: 600 });
                }
            }
            else if ($("#FilterByLogic :selected").text().includes('Choose Logic')){
                Cookies.set('input2', '' , { expires: 600 });
                Cookies.set('filter2', '' , { expires: 600 });
                Cookies.set('logic', '-' , { expires: 600 });
            }
            var diplayLogic = Cookies.get('Logic')
            var displayInput2='';
            var displayInput1 ='';
            displayInput1 += Cookies.get('negate1').includes('true') ? '!' : '';
            if ($("#FilterBySelection :selected").text().includes('Device')) {
                displayInput1 += '(' + 'Device='+Cookies.get('input1') + ')';
            }else if ($("#FilterBySelection :selected").text().includes('Location')){
                displayInput1+= '( ('+$("#inputStartLat").val() + '<=Lat<='+$("#inputEndLat").val()+") & ("+ $("#inputStartLon").val()+"<=Lon<="+ $("#inputEndLon").val()+') )';
            }else if ($("#FilterBySelection :selected").text().includes('Time')){
                displayInput1+= '( ('+$("#start").val()+"  "+$("#startTime").val() +" <=Time<= "+ $("#end").val()+"  "+$("#endTime").val()+') )';
            }
            if (Cookies.get('Logic').includes('Choose Logic')) {
                diplayLogic = '';
            }else{
                displayInput2 = Cookies.get('negate2').includes('true') ? '!' : '';
                if ($("#FilterBySelection2 :selected").text().includes('Device')) {
                    displayInput2 += '(' + 'Device='+Cookies.get('input2') + ')';
                }else if ($("#FilterBySelection2 :selected").text().includes('Location')){
                    displayInput2+= '( ('+$("#inputStartLat2").val() + '<=Lat<='+$("#inputEndLat2").val()+") & ("+ $("#inputStartLon2").val()+"<=Lon<="+ $("#inputEndLon2").val()+') )';
                }else if ($("#FilterBySelection2 :selected").text().includes('Time')){
                    displayInput2+= '( ('+$("#start2").val()+"  "+$("#startTime2").val() +" <=Time<= "+ $("#end2").val()+"  "+$("#endTime2").val()+') )';
                }
            }
            $("h4#displayFilter").html( displayInput1+diplayLogic+displayInput2);
            $.ajax(
                {
                    "url": encodeURI("/filter")
                }
            ).then(
                function(output) {
                    var n = output.includes("true");
                    var userNameOutput = output.split(",");
                    $('div#filePopup').show();
                    if(n==true){
                        $("h4#filePopupMsg").html("saved "+ userNameOutput[1]);
                        $("h3#NumberOfLines").html(""+ userNameOutput[2]);
                        console.log("NumberOfLines:"+userNameOutput[2]);
                        $("h3#NumberOfMACS").html(""+ userNameOutput[3]);
                        console.log("NumberOfMACS:"+userNameOutput[3]);

                    }
                    else
                        $("h4#filePopupMsg").html("Can't save no files, try loading some files dimwit.")

                }
            );
            return false

        });
        <!-- Save Filter -->
        $("#btnSaveFilter").click(function(){
            <!-- Submit Device Filter -->
            sessionStorage.clear();
            sessionStorage.setItem('Logic', $("#FilterByLogic :selected").text() );
            Cookies.set('filter1', $("#FilterBySelection :selected").text() , { expires: 600 });
            Cookies.set('filter2', $("#FilterBySelection2 :selected").text() , { expires: 600 });
            Cookies.set('Logic', $("#FilterByLogic :selected").text() , { expires: 600 });
            Cookies.set('negate1', $("#NegateInput1").is(":checked") , { expires: 600 });
            if ($("#FilterBySelection :selected").text().includes('Device')){
                if ($("#inputDevice").val().length === 0){
                    alert("you forgot to input");
                    return;
                }else{
                    sessionStorage.setItem('inputDevice1', $("#inputDevice").val() );
                    Cookies.set('input1', $("#inputDevice").val() , { expires: 600 });
                }
                <!-- Submit Location Filter -->
            }else if ($("#FilterBySelection :selected").text().includes('Location')){
                Cookies.set('input1', $("#inputStartLat").val() +"&"+ $("#inputStartLon").val()+"&"+ $("#inputEndLat").val()+"&"+ $("#inputEndLon").val(), { expires: 600 });
            }<!-- Submit Time Filter -->
            else if ($("#FilterBySelection :selected").text().includes('Time')) {
                Cookies.set('input1', $("#start").val()+"T"+$("#startTime").val() +"&"+ $("#end").val()+"T"+$("#endTime").val() , { expires: 600 });
            }
            if (!$("#FilterByLogic :selected").text().includes('Choose Logic')){
                <!-- if choose second filter -->
                Cookies.set('negate2', $("#NegateInput2").is(":checked") , { expires: 600 });
                if ($("#FilterBySelection2 :selected").text().includes('Device')){
                    if ($("#inputDevice2").val().length === 0){
                        alert("you forgot to input");
                        return;
                    }else{
                        sessionStorage.setItem('inputDevice1', $("#inputDevice2").val() );
                        Cookies.set('input2', $("#inputDevice2").val() , { expires: 600 });
                    }
                    <!-- Submit Location Filter -->
                }else if ($("#FilterBySelection2 :selected").text().includes('Location')){
                    Cookies.set('input2', $("#inputStartLat2").val() +"&"+ $("#inputStartLon2").val()+"&"+ $("#inputEndLat2").val()+"&"+ $("#inputEndLon2").val(), { expires: 600 });
                }<!-- Submit Time Filter -->
                else if ($("#FilterBySelection2 :selected").text().includes('Time')) {
                    Cookies.set('input2', $("#start2").val()+"T"+$("#startTime2").val() +"&"+ $("#end2").val()+"T"+$("#endTime2").val() , { expires: 600 });
                }
            }
            else if ($("#FilterByLogic :selected").text().includes('Choose Logic')){
                Cookies.set('input2', '' , { expires: 600 });
                Cookies.set('filter2', '' , { expires: 600 });
                Cookies.set('logic', '-' , { expires: 600 });
            }
            $.ajax(
                {
                    "url": encodeURI("/saveFilter")
                }
            ).then(
                function(output) {
                }
            );
        });
        <!-- input Filter 2 -->
        $("#FilterByLogic").click(function(){
            var selText = $(this).text();
            $(this).parents('.btn-group').find('.dropdown-toggle').html(selText+' <span class="caret"></span>');
            if ($("#FilterByLogic :selected").text().includes('And')){
                $("div#inputFilter2").show();
            }else if ($("#FilterByLogic :selected").text().includes('Or')){
                $("div#inputFilter2").show();
            }else if ($("#FilterByLogic :selected").text().includes('Choose Logic')) {
                $("div#inputFilter2").hide();
            }
        });
        <!-- date picker -->
        <!-- time picker sources: Reut and Inon-->
        // applay the dates filter
        $("button#applyDate").click(function() {
            var input1 = $("input#start").val();
            var input11= $("input#startTime").val();
            var input2 = $("input#end").val();
            var input22= $("input#endTime").val();
            var final= input1+" "+ input11+"  to    "+ input2+" "+input22;
            console.log("filter 1:"+final+"");
            console.log("start:"+$("input#start").val());
            console.log("start time :"+$("input#startTime").val());
            $("input#start").val()+'T'+$("input#startTime").val();
        });
        $('#start').on("change", function(){
            $(this).attr('value', $('#start').val());
            $('#end').attr('min', $('#start').val());
            $('#end').attr('value', $('#start').val());
        });
        $('#end').on("change", function(){
            if($('#start').val()>$('#end').val()){
                $('#start').attr('value', $('#end').val());
            }
            $(this).attr('value', $('#end').val());
            $('#end').attr('min', $('#start').val());
            $('#start').attr('max', $('#end').val());
            if($('#start').val()==$('#end').val()){
                $('#endTime').attr('min', $('#startTime').val());
                $('#startTime').attr('max', $('#endTime').val());
            }
        });
        $('#startTime').on("change", function(){
            if($('#start').val()==$('#end').val()){
                if($('#startTime').val()>$('#endTime').val())
                    $('#endTime').attr('value', $('#startTime').val());
            }
        });
        $('#endTime').on("change", function(){
            if($('#start').val()==$('#end').val()){
                if($('#endTime').val()<$('#startTime').val()){
                    $('#startTime').attr('value', $('#endTime').val());
                }
            }
        });
        <!-- date picker 2-->
        <!-- time picker sources: Reut and Inon-->
        // applay the dates filter
        $("button#applyDate").click(function() {
            var input1 = $("input#start2").val();
            var input11= $("input#startTime2").val();
            var input2 = $("input#end2").val();
            var input22= $("input#endTime2").val();
            var final= input1+" "+ input11+"  to    "+ input2+" "+input22;
            console.log("filter 1:"+final+"");
            console.log("start:"+$("input#start2").val());
            console.log("start time :"+$("input#startTime2").val());
            $("input#start").val()+'T'+$("input#startTime2").val();
        });
        $('#start2').on("change", function(){
            $(this).attr('value', $('#start2').val());
            $('#end2').attr('min', $('#start2').val());
            $('#end2').attr('value', $('#start2').val());
        });
        $('#end2').on("change", function(){
            if($('#start2').val()>$('#end2').val()){
                $('#start2').attr('value', $('#end2').val());
            }
            $(this).attr('value', $('#end2').val());
            $('#end2').attr('min', $('#start2').val());
            $('#start2').attr('max', $('#end2').val());
            if($('#start2').val()==$('#end2').val()){
                $('#endTime2').attr('min', $('#startTime2').val());
                $('#startTime2').attr('max', $('#endTime2').val());
            }
        });
        $('#startTime2').on("change", function(){
            if($('#start2').val()==$('#end2').val()){
                if($('#startTime2').val()>$('#endTime2').val())
                    $('#endTime2').attr('value', $('#startTime2').val());
            }
        });
        $('#endTime2').on("change", function(){
            if($('#start2').val()==$('#end2').val()){
                if($('#endTime2').val()<$('#startTime2').val()){
                    $('#startTime2').attr('value', $('#endTime2').val());
                }
            }
        });
        <!-- Clear Filter-->
        $("button#btnClearFilter").click(() => {
            alert("will clear filter");
        $.ajax(
            {
                "url": encodeURI("/save2csv")
            }
        ).then(
            function(output) {
                var n = output.includes("true");
                var userNameOutput = output.split(",");
                $('div#filePopup').show();
                if(n==true){
                    $("h4#filePopupMsg").html("saved "+ userNameOutput[1]);
                    $("h3#NumberOfLines").html(""+ userNameOutput[2]);
                    console.log("NumberOfLines:"+userNameOutput[2]);
                    $("h3#NumberOfMACS").html(""+ userNameOutput[3]);
                    console.log("NumberOfMACS:"+userNameOutput[3]);
                }
                else
                    $("h4#filePopupMsg").html("Can't save no files, try loading some files dimwit.")
            }
        );
        return false
        })
    </script>

</body>
</html>
